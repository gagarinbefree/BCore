@model BCore.Models.ViewModels.WhatsNewViewModel

@foreach (var page in Model.Feeds)
{
    <div>
        <div class="margin-top"></div><hr />
        
        @{
            await Html.RenderPartialAsync("_StatusLine", page);
        }

        <input asp-for="@page.Id" type="hidden" />
        @for (var ii = 0; ii < (page.Parts.Count() == 1 ? 1 : 2); ii++)
        {           
            <div class="margin-top">
                @if (!String.IsNullOrWhiteSpace(page.Parts[ii].Text))
                {
                    <div class="wrap">
                        @if (ii == 0)
                        {
                            <h4><text hashing-text="@page.Parts[ii].Text"></text></h4>
                        }
                        else
                        {
                            <div>
                                <text hashing-text="@page.Parts[ii].Text"></text>
                            </div>
                        }
                    </div>
                }

                @if (!String.IsNullOrWhiteSpace(page.Parts[ii].ImageUrl))
                {                    
                    <img class="img-responsive" src="@page.Parts[ii].ImageUrl" />                    
                }
            </div>

            <input asp-for="@page.Parts[ii].Id" type="hidden" />
        }
        
        <div class="margin-top">
            <a class="btn btn-default" href="/Post?id=@page.Id" role="button">read</a>
            <div class="btn-group pull-right">
                <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <span class="glyphicon glyphicon glyphicon-cog" aria-hidden="true"></span>
                    <span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                    <li><a href="/Blog/DeletePost?id=@page.Id">delete</a></li>
                </ul>
            </div>
        </div>
    </div>
}